---
title: "Data Exploration"
author: "Clint&Frank"
date: "October 30, 2016"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Data description
Air quality data collected at outdoor monitors across the United States, Puerto Rico, and the U.S. Virgin Islands. The data comes primarily from the AOS data base. (Among which we chose the data of Ozone and SO2.)

## Library used
```{r library}
library(ggplot2)
library(dplyr)
library(readr)
library(lubridate)
library(ggmap)
library(plotly)
```

# Load data
```{r Load, cahce = TRUE}
df<- read_csv("Ozone.zip")
df2<- read_csv("SO2.zip")
head(df)
head(df2)
```

# Understand the Data
```{r Number of Method}
#Overlook of Method used
df%>%
  group_by(`Method Name`)%>%
  summarise(n())
```

```{r Study of Method vs. Sample Measurement}
#See if there is difference between the data generated using different Method.
df%>%
  group_by(`Method Name`)%>%
  summarise(mean_measure = mean(`Sample Measurement`))
ggplot(df)+
  geom_boxplot(aes(x = `Method Name`, y = `Sample Measurement`))
ggplotly()
```
The data of sample measurement collected by different Method shows little difference. 

# Data analysis
```{r Time in Second to Time in Hour}
Ozone <-df%>%
  mutate(Time_in_Hour = `Time Local`/3600)
SO2 <-df2%>%
  mutate(Time_in_Hour1 = `Time Local`/3600)
```

## Time vs. Sample Measurement
```{r Study of the amount of Ozone at different time in a day}
#Boxplot of time(minute) with Measure separated by the method Name
ggplot(Ozone)+
  geom_boxplot(mapping = aes(x=factor(Time_in_Hour), y=`Sample Measurement`)) +
  facet_wrap(~`Method Name`)
geom_point(mapping = aes(x=Time_in_hour , y= `Sample measurement`))
ggplotly()

ggplot(SO2)+
  geom_boxplot(mapping = aes(x=factor(Time_in_Hour1), y=`Sample Measurement`)) +
  facet_wrap(~`Method Name`)
geom_point(mapping = aes(x=Time_in_hour , y= `Sample measurement`))
ggplotly()
```
The plot showed that the amount of Ozone are generally richer at afternoon(10-17)

## Geographical Distribution of Ozone
```{r Map the Ozone, warning = FALSE}
map <- get_map("the United States of America", zoom = 4, maptype = 'hybrid',
                      source = 'google', color='color')

Df_New <- 
  df%>%
  group_by(`State Name`) %>%
  mutate(mean_measure = mean(`Sample Measurement`)) %>%
  select(mean_measure, `State Name`, Longitude, Latitude) %>%
  unique()

ggmap(map) + 
  geom_point(data = Df_New, aes(x = Longitude, y = Latitude, colour = mean_measure), size = 3, alpha = 0.5)

Df2_New <- 
  df2 %>%
  group_by(`State Name`) %>%
  mutate(mean_measure = mean(`Sample Measurement`)) %>%
  select(mean_measure, `State Name`, Longitude, Latitude) %>%
  unique()

ggmap(map) + 
  geom_point(data = Df2_New, aes(x = Longitude, y = Latitude, colour = mean_measure), size = 3, alpha = 0.5)
```
Map shows that the Ozone are rich in the east and west coast of the United States usually contains higher amount of Ozone. And it is clear that the places covered with vegetation has more concentrated and wider covarage of Ozone. Especially around the lake area and coastal area.
Map also shows that concentrated SO2 are distributed in the Northeast part and south west part of the United States. 


## SO2 vs. Ozone
```{r Merge, eval=FALSE}
OzoneAmount <- df %>% select(`Sample Measurement`)
SO2Amount <- df2 %>% select(`Sample Measurement`)
df3 <- merge(OzoneAmount,SO2Amount)
```

```{r Study how the existence of SO2 influnces the amount of the Ozone, eval = FALSE}
ggplot(df)
  geom_point(mapping = aes(x = OzoneAmount,SO2Amount))
```

## Conclusion 


